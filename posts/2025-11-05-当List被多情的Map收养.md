# å½“Listè¢«å¤šæƒ…çš„Mapæ”¶å…»

------

## ğŸŒ¸ ä¸€ã€é—®é¢˜èƒŒæ™¯

åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨ `Map<String, List<String>>` ç»“æ„æ¥å­˜æ”¾åˆ†ç»„æ•°æ®ï¼Œä¾‹å¦‚ï¼š

```java
inspectionMap.computeIfAbsent(jsonKey, k -> new ArrayList<>())
             .add(fieldBuildingInputJson.toJSONString());
```

ä½†æœ‰æ—¶å€™ä¼šå‡ºç°å¥‡æ€ªçš„ç°è±¡ï¼š

```json
{
  "date": ["xxx"],
  "address": ["xxx"],
  "community": ["xxx"]
}
```

çœ‹ä¼¼åªå¾€ `"date"` çš„ list æ·»åŠ äº†æ•°æ®ï¼Œå´å‘ç°æ‰€æœ‰ key éƒ½è¢«æ·»åŠ äº†åŒæ ·çš„å€¼ï¼

------

## ğŸŒ¼ äºŒã€é—®é¢˜åŸå› åˆ†æ

### ğŸ§  1. å…±äº«å¼•ç”¨å¯¼è‡´

åœ¨åˆå§‹åŒ– map æ—¶ï¼Œæ‰€æœ‰ key éƒ½å…±ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨ï¼š

```java
public static <T> Map<String, T> initInspections(T value) {
    Map<String, T> map = new HashMap<>(32);
    map.put("address", value);
    map.put("date", value);
    map.put("community", value);
    return map;
}
```

å¦‚æœè°ƒç”¨ï¼š

```java
Map<String, List<String>> inspectionMap = initInspections(new ArrayList<>());
```

é‚£æ‰€æœ‰ keyï¼ˆ`address`ã€`date`ã€`community`ï¼‰éƒ½æŒ‡å‘åŒä¸€ä¸ª `ArrayList`ã€‚
â†’ ä¿®æ”¹ä¸€ä¸ª key çš„ listï¼Œç›¸å½“äºä¿®æ”¹äº†å…¨éƒ¨ã€‚

------

### ğŸ› 2. æ‰“å°é”™è§‰

`System.out.println(inspectionMap)` æ‰“å°çš„æ˜¯æ•´ä¸ª mapï¼Œçœ‹èµ·æ¥æ¯ä¸ª key éƒ½â€œå˜äº†â€ï¼Œå…¶å®å®ƒä»¬éƒ½æŒ‡å‘åŒä¸€ä¸ª list å®ä¾‹ã€‚

------

## ğŸŒˆ ä¸‰ã€è§£å†³æ–¹æ¡ˆ

### âœ… æ–¹æ³•ä¸€ï¼šä¸ºæ¯ä¸ª key å•ç‹¬åˆ›å»ºå¯¹è±¡ï¼ˆæ¨èï¼‰

```java
public static Map<String, List<String>> initInspections() {
    Map<String, List<String>> map = new HashMap<>(32);
    map.put("address", new ArrayList<>());
    map.put("date", new ArrayList<>());
    map.put("community", new ArrayList<>());
    return map;
}
```

è°ƒç”¨ï¼š

```java
Map<String, List<String>> inspectionMap = initInspections();
```

ğŸ‘‰ æ¯ä¸ª key æ‹¥æœ‰ç‹¬ç«‹çš„ Listï¼Œäº’ä¸å½±å“ã€‚

------

### âœ… æ–¹æ³•äºŒï¼šä½¿ç”¨ `Supplier<T>` ä¼˜åŒ–æ³›å‹ï¼ˆæ›´çµæ´»ä¼˜é›…ï¼‰

```java
public static <T> Map<String, T> initInspections(Supplier<T> supplier) {
    Map<String, T> map = new HashMap<>(32);
    map.put("address", supplier.get());
    map.put("date", supplier.get());
    map.put("community", supplier.get());
    return map;
}
```

#### ç¤ºä¾‹ 1ï¼šåˆå§‹åŒ–ç©º List

```java
Map<String, List<String>> inspectionMap = initInspections(ArrayList::new);
```

#### ç¤ºä¾‹ 2ï¼šåˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²

```java
Map<String, String> inspectionMap = initInspections(() -> "");
```

è¾“å‡ºï¼š

```json
{address=, date=, community=}
```

------

### âœ… æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ `Function<String, T>` åŠ¨æ€ç”Ÿæˆå€¼ï¼ˆå¯å®šåˆ¶ï¼‰

```java
public static <T> Map<String, T> initInspections(Function<String, T> valueFunction) {
    Map<String, T> map = new HashMap<>(32);
    map.put("address", valueFunction.apply("address"));
    map.put("date", valueFunction.apply("date"));
    map.put("community", valueFunction.apply("community"));
    return map;
}
```

è°ƒç”¨ï¼š

```java
Map<String, String> map = initInspections(key -> key + "_é»˜è®¤å€¼");
```

è¾“å‡ºï¼š

```json
{address=address_é»˜è®¤å€¼, date=date_é»˜è®¤å€¼, community=community_é»˜è®¤å€¼}
```

------

## ğŸ’ å››ã€ç»“è®ºæ€»ç»“

| é—®é¢˜                 | åŸå›                                         | è§£å†³æ–¹å¼                 |
| -------------------- | ------------------------------------------- | ------------------------ |
| æ‰€æœ‰ key çš„å€¼éƒ½ç›¸åŒ  | å¤šä¸ª key å…±ç”¨åŒä¸€ä¸ªå¯¹è±¡å¼•ç”¨                 | æ¯ä¸ª key å•ç‹¬ `new` å¯¹è±¡ |
| æƒ³é€šç”¨åˆå§‹åŒ–ä¸åŒç±»å‹ | ä½¿ç”¨ `Supplier<T>` æˆ– `Function<String, T>` | æé«˜å¤ç”¨æ€§ä¸çµæ´»æ€§       |

------

## ğŸŒ· äº”ã€æ¨èå†™æ³•ç¤ºä¾‹

```java
Map<String, List<String>> inspectionMap = initInspections(ArrayList::new);
inspectionMap.computeIfAbsent("date", k -> new ArrayList<>())
              .add("fieldBuildingInputJson.toJSONString()");
System.out.println(inspectionMap);
```

è¾“å‡ºï¼š

```plain
{address=[], date=[fieldBuildingInputJson.toJSONString()], community=[]}
```

------

âœ¨ **ä¸€å¥è¯æ€»ç»“ï¼š**

åˆå§‹åŒ– Map æ—¶åƒä¸‡åˆ«å…±ç”¨åŒä¸€ä¸ªå¯å˜å¯¹è±¡å¼•ç”¨ã€‚
ç”¨ `Supplier<T>` ä¼˜é›…è§£å†³ï¼Œè®©æ¯ä¸ª key éƒ½æœ‰è‡ªå·±çš„â€œç‹¬ç«‹å°ä¸–ç•Œâ€ã€‚ğŸ’•

------



## 